{% extends 'Base_Page.html' %}
{% load static %}

{% block main %}

<section>
    <div class="carousel prev relative">
        <div class="list">
            <div class="item">
                <img src="{% static 'image/hero-image5.png' %}" alt="" >
                <div class="content space-y-5">
                    <h3 class="country font-bold tracking-wider text-xl">Colonge</h3>
                    <h2 class="location font-bold text-5xl">NRW GERMANY</h2>
                    <h2 class="type font-bold text-5xl text-yellow-600">COLONGE CATHEDRAL</h2>
                    <P class="description">Colonge Cathedral at night with Rhine Reflection </P>
                    <div class="buttons flex space-x-6">
                        <button class="bg-yellow-600 hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SEE MORE</button>
                        <button class="border hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SUSCRIBE</button>
                    </div>

                </div>
            </div>
            <div class="item">
                <img src="{% static 'image/hero-image2.png' %}" alt="">
                <div class="content space-y-5">
                    <h3 class="country font-bold tracking-wider text-xl">Nepal India</h3>
                    <h2 class="location font-bold text-5xl">WEEKLY VILLAS</h2>
                    <h2 class="type font-bold text-5xl text-yellow-600">ADVENTURE VILLA</h2>
                    <P class="description">Wake up call to paradise in the stunning Beach Front Villa !!! With a private pool ... </P>
                    <div class="buttons flex space-x-6">
                        <button class="bg-yellow-600 hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SEE MORE</button>
                        <button class="border hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SUSCRIBE</button>
                    </div>
                </div>
            </div>
            <div class="item">
                <img src="{% static 'image/hero-image3.png' %}" alt="">
                <div class="content space-y-5">
                    <h3 class="country font-bold tracking-wider text-xl">North Cordeilla</h3>
                    <h2 class="location font-bold text-5xl">MOUNT ELBERT</h2>
                    <h2 class="type font-bold text-5xl text-yellow-600">MOUNTANIOUS ADVENTURES</h2>
                    <P class="description">The Rocky Streches some 3000 miles from British Columbia, and Albert in Canada</P>
                    <div class="buttons flex space-x-6">
                        <button class="bg-yellow-600 hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SEE MORE</button>
                        <button class="border hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SUSCRIBE</button>
                    </div>

                </div>
            </div>
            <div class="item">
                <img src="{% static 'image/hero-image4.png' %}" alt="">
                <div class="content space-y-5">
                    <h3 class="country font-bold tracking-wider text-xl">HersheyPark</h3>
                    <h2 class="location font-bold text-5xl">HERSHEY PENNYSLYIA</h2>
                    <h2 class="type font-bold text-5xl text-yellow-600">PARK ADVENTURES</h2>
                    <p class="description">Experience thrilling rides, sweet treats, and unforgettable adventures at HersheyPark in Pennsylvania!</p>
                    <div class="buttons flex space-x-6">
                        <button class="bg-yellow-600 hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SEE MORE</button>
                        <button class="border hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SUSCRIBE</button>
                    </div>

                </div>
            </div>
            <div class="item">
                <img src="{% static 'image/hero-image5.png' %}" alt="">
                <div class="content space-y-5">
                    <h3 class="country font-bold tracking-wider text-xl">Lake Louise</h3>
                    <h2 class="location font-bold text-5xl">BANFF, CANADA</h2>
                    <h2 class="type font-bold text-5xl text-yellow-600">NATURE ESCAPE</h2>
                    <p class="description">Surrounded by towering mountains and lush forests, Lake Louise offers breathtaking turquoise waters and serene beauty.</p>
                    <div class="buttons flex space-x-6">
                        <button class="bg-yellow-600 hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SEE MORE</button>
                        <button class="border hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SUSCRIBE</button>
                    </div>

                </div>
            </div>
            <div class="item">
                <img src="{% static 'image/hero-image6.png' %}" alt="">
                <div class="content space-y-5">
                    <h3 class="country font-bold tracking-wider text-xl">Milford Sound</h3>
                    <h2 class="location font-bold text-5xl">FIORDLAND, NEW ZEALAND</h2>
                    <h2 class="type font-bold text-5xl text-yellow-600">SCENIC CRUISE</h2>
                    <p class="description">Explore the stunning fjords of Milford Sound, where towering mountains, cascading waterfalls, and tranquil waters create a breathtaking adventure.</p>
                    <div class="buttons flex space-x-6">
                        <button class="bg-yellow-600 hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SEE MORE</button>
                        <button class="border hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SUSCRIBE</button>
                    </div>

                </div>
            </div>
            <div class="item">
                <img src="{% static 'image/hero-image7.png' %}" alt="">
                <div class="content space-y-5">
                    <h3 class="country font-bold tracking-wider text-xl">Navagio Beach</h3>
                    <h2 class="location font-bold text-5xl">ZAKYNTHOS, GREECE</h2>
                    <h2 class="type font-bold text-5xl text-yellow-600">SEASIDE PARADISE</h2>
                    <p class="description">With crystal-clear blue skies, shimmering white stones, and dramatic cliffs, Navagio Beach is a breathtaking coastal gem.</p>
                    <div class="buttons flex space-x-6">
                        <button class="bg-yellow-600 hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SEE MORE</button>
                        <button class="border hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SUSCRIBE</button>
                    </div>

                </div>
            </div>
            <div class="item">
                <img src="{% static 'image/hero-image8.png' %}" alt="">
                <div class="content space-y-5">
                    <h3 class="country font-bold tracking-wider text-xl">Plitvice Lakes</h3>
                    <h2 class="location font-bold text-5xl">CROATIA</h2>
                    <h2 class="type font-bold text-5xl text-yellow-600">ENCHANTED WATERS</h2>
                    <p class="description">Surrounded by lush forests, Plitvice Lakes boasts stunning turquoise waters, cascading waterfalls, and serene wooden walkways.</p>
                    <div class="buttons flex space-x-6">
                        <button class="bg-yellow-600 hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SEE MORE</button>
                        <button class="border hover:bg-black py-2 px-4 shadow-sm rounded-lg tracking-wide font-bold">SUSCRIBE</button>
                    </div>

                </div>
            </div>
        </div>
        <div class="thumbnail">
            
            <div class="item ">
                <img src="{% static 'image/hero-image5.png' %}" alt="">
                <div class="thumb-content">
                    <h3 class="country text-sm font-bold tracking-wider">NRW GERMANY</h3>
                    <h2 class="type font-bold text-sm text-yellow-600">COLONGE CATHEDRAL</h2>
                </div>
            </div>
            <div class="item  ">
                <img src="{% static 'image/hero-image2.png' %}" alt="">
                <div class="thumb-content">
                    <h3 class="country font-bold text-sm tracking-wider">NEPAL INDIA</h3>
                    <h2 class="type font-bold text-sm text-yellow-600">WEEKLY VILLAS</h2>
                </div>
            </div>
            <div class="item  ">
                <img src="{% static 'image/hero-image3.png' %}" alt="">
                <div class="thumb-content">
                    <h3 class="country font-bold text-sm tracking-wider">NOTRH CORDEILLA</h3>
                    <h2 class="type font-bold text-sm text-yellow-600">MOUNT ELBERT</h2>
                </div>
            </div>
            <div class="item  ">
                <img src="{% static 'image/hero-image4.png' %}" alt="">
                <div class="thumb-content">
                    <h3 class="country font-bold text-sm tracking-wider">HERSHEYPARK</h3>
                    <h2 class="type font-bold text-sm text-yellow-600">HERSHEY PENNYSLYIA</h2>
                </div>
            </div>
            <div class="item  ">
                <img src="{% static 'image/hero-image5.png' %}" alt="">
                <div class="thumb-content">
                    <h3 class="country font-bold text-sm tracking-wider">LAKE LOUISE</h3>
                    <h2 class="type font-bold text-sm text-yellow-600">BANFF, CANADA</h2>
                </div>
            </div>
            <div class="item  ">
                <img src="{% static 'image/hero-image6.png' %}" alt="">
                <div class="thumb-content">
                    <h3 class="country font-bold text-sm tracking-wider">MILFORD SOUND</h3>
                    <h2 class="type font-bold text-sm text-yellow-600">FIORDLAND, NEW ZEALAND</h2>
                </div>
            </div>
            <div class="item  ">
                <img src="{% static 'image/hero-image7.png' %}" alt="">
                <div class="thumb-content">
                    <h3 class="country font-bold text-sm tracking-wider">NAVAGIO BEACH</h3>
                    <h2 class="type font-bold text-sm text-yellow-600">ZAKYNTHOS, GREECE</h2>
                </div>
            </div>
            <div class="item  ">
                <img src="{% static 'image/hero-image8.png' %}" alt="">
                <div class="thumb-content">
                    <h3 class="country font-bold text-sm tracking-wider">PLITVICE LAKES</h3>
                    <h2 class="type font-bold text-sm text-yellow-600">CROATIA</h2>
                </div>
            </div>
            
        </div> 
        <!-- arrows -->
        <div class="arrows absolute top-[80%] z-50 right-72 md:left-52 w-[120px] flex justify-between items-center">
            <div id="prev" 
                class="prev w-[50px] h-[50px] flex items-center justify-center rounded-full bg-[#eee4] text-black text-2xl font-bold shadow-lg hover:bg-black hover:text-white transition duration-300 cursor-pointer">
                &#10094; <!-- Left Arrow -->
            </div>
            <div id="next" 
                class=" w-[50px] h-[50px] flex items-center justify-center rounded-full bg-[#eee4] text-black text-2xl font-bold shadow-lg hover:bg-black hover:text-white transition duration-300 cursor-pointer">
                &#10095; <!-- Right Arrow -->
            </div>
        </div>
        <!-- time -->
         <div class="time"></div>
    </div>
</section>

<section class="w-[80%] mx-auto my-20">
    <div class="flex flex-col md:flex-row gap-10 ">
        <!-- Filter Box -->
        <div class="w-full md:w-[25%] p-7 bg-white rounded-2xl text-black space-y-5">
            <h3 class="text-center text-lg font-semibold">Filter Results</h3>
            
            <form method="GET" action="{% url 'destinations_list' %}">
                <!-- Country Dropdown -->
                <div class="mb-3">
                    <label for="countrySelect" class="block text-sm font-medium">Country</label>
                    <select class="w-full p-2 border rounded-md" id="countrySelect" name="country" onchange="this.form.submit()">
                        <option value="">Select a country</option>
                        {% for country in countries %}
                            <option value="{{ country.id }}" {% if selected_country_id|stringformat:"s" == country.id|stringformat:"s" %}selected{% endif %}>
                                {{ country.country }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
            </form>
            
            <!-- Travel Type Dropdown -->
            <div class="mb-3">
                <label for="travelTypeSelect" class="block text-sm font-medium">Travel Type</label>
                <select class="w-full p-2 border rounded-md" id="travelTypeSelect">
                    <option>Select travel type</option>
                    <option>Adventure</option>
                    <option>Relaxation</option>
                    <option>Cultural</option>
                    <option>Luxury</option>
                </select>
            </div>
            
            <!-- Price Range Slider -->
            <div class="mb-3 text-center">
                <label for="priceRange" class="block text-sm font-medium">Price Range: <span id="priceValue">$100</span></label>
                <input type="range" class="w-full" id="priceRange" min="100" max="1000" value="100" oninput="updatePriceValue(this.value)">
            </div>
            
            <!-- Reset Button -->
            <div class="text-center">
                <button class="w-full bg-yellow-600 text-white py-2 rounded-md font-bold">Reset</button>
            </div>
        </div>
        
        <!-- Cards Section -->
        <div class="w-full md:w-[75%] px-3">
            <div class="flex flex-wrap mx-2">
                {% for destination in page_obj %}
                    <div class="w-full sm:w-1/2 lg:w-1/3 px-2 mb-4">
                        <div class="bg-white shadow-md rounded-lg overflow-hidden relative">
                            <a href="{% url 'destinations_detail' destination.pk %}" class="block">
                                <img src="{{ destination.image.url }}" class="w-full h-48 object-cover" alt="{{ destination.location_name }}">
                                <div class="absolute top-2 left-2 bg-yellow-600 text-white px-2 py-1 text-sm font-bold rounded-md">${{ destination.price }}</div>
                                <div class="p-4">
                                    <h5 class="text-lg text-black font-semibold">{{ destination.location_name }}</h5>
                                    <p class="text-gray-500 text-sm">{{ destination.country }}</p>
                                </div>
                            </a>
                        </div>
                    </div>
                {% empty %}
                    <p class="text-center w-full">No destinations available.</p>
                {% endfor %}
            </div>
            
            <!-- Pagination -->
            <nav class="mt-4">
                <ul class="flex justify-center space-x-2">
                    {% if page_obj.has_previous %}
                        <li><a class="px-3 py-1 bg-gray-200 rounded" href="?page=1{% if selected_country_id %}&country={{ selected_country_id }}{% endif %}">&laquo;&laquo; First</a></li>
                        <li><a class="px-3 py-1 bg-gray-200 rounded" href="?page={{ page_obj.previous_page_number }}{% if selected_country_id %}&country={{ selected_country_id }}{% endif %}">&lsaquo; Previous</a></li>
                    {% endif %}
                    <li class="px-3 py-1 bg-gray-300 rounded">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</li>
                    {% if page_obj.has_next %}
                        <li><a class="px-3 py-1 bg-gray-200 rounded" href="?page={{ page_obj.next_page_number }}{% if selected_country_id %}&country={{ selected_country_id }}{% endif %}">Next &rsaquo;</a></li>
                        <li><a class="px-3 py-1 bg-gray-200 rounded" href="?page={{ page_obj.paginator.num_pages }}{% if selected_country_id %}&country={{ selected_country_id }}{% endif %}">Last &raquo;&raquo;</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    </div>
</section>


<script>
    const nextDom = document.getElementById("next");
    const prevDom = document.getElementById("prev");
    let carouselDom = document.querySelector('.carousel')
    let listItemDom = document.querySelector('.carousel .list')
    let thumbnailDom = document.querySelector('.carousel .thumbnail')

    nextDom.onclick = function(){
        showSlider('next');
    }
    prevDom.onclick = function(){
        showSlider('prev')
    }

    let timeRunning = 3000;
    let timeAutoNext = 7000;
    let runTimeout;
    let runAutoRun = setTimeout(()=> {
            nextDom.click()

        }, timeAutoNext)

    function showSlider(type){
        let itemSlider = document.querySelectorAll('.carousel .list .item');
        let itemThumbnail = document.querySelectorAll('.carousel .thumbnail .item');

        if (type === 'next'){
            listItemDom.appendChild(itemSlider[0])
            thumbnailDom.appendChild(itemThumbnail[0])
            carouselDom.classList.add('next');
        }else{
            let positionLastItem = itemSlider.length - 1;
            listItemDom.prepend(itemSlider[positionLastItem]);
            thumbnailDom.prepend(itemThumbnail[positionLastItem]);
            carouselDom.classList.add('prev')
        }

        clearTimeout(runTimeout);
        runTimeout = setTimeout(() => {
            carouselDom.classList.remove('next');
            carouselDom.classList.remove('prev');
        }, timeRunning)

        clearTimeout(runAutoRun);
        runAutoRun = setTimeout(()=> {
            nextDom.click()

        }, timeAutoNext)
    }
</script>
{% endblock %}